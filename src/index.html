<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Auckland Orienteering Events Map</title>
	<link rel="icon" type="image/ico" href="/images/favicon.ico">
	<link rel="apple-touch-icon" sizes="152x152" href="apple-touch-icon.png" />
	<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon-180x180.png">
	<link rel="icon" sizes="192x192" href="touch-icon-192x192.png">
	<meta name="theme-color" content="#ff5722">
	<!-- jQuery datepicker -->
	<link rel="stylesheet" href="css/jquery-ui.css">
	<!-- Material Design Lite -->
	<link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.deep_orange-orange.min.css" />
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<link rel="stylesheet" href="css/main.css">
	<!-- iOS tweaks - Reference: (via Google Dev) http://taylor.fausak.me/2015/01/27/ios-8-web-apps/ -->
	<!-- Allow web app to be run in full-screen mode if they save to home. -->
	<meta name="apple-mobile-web-app-capable" content="yes">
	<!-- Configure the status bar. Black looks great with orange.-->
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
</head>
</div>

<body class="neighbourhood-map">
	<!-- Always shows a header, even in smaller screens. -->
	<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header mdl-layout--fixed-drawer">
		<header class="mdl-layout__header">
			<div class="mdl-layout__header-row">
				<!-- Title -->
				<span class="mdl-layout-title">Auckland Orienteering Events</span>
			</div>
			<!-- Tabs -->
			<div class="mdl-layout__tab-bar mdl-js-ripple-effect" data-bind="if: selectedEvent">
				<a href="#scroll-tab-1" class="mdl-layout__tab is-active">Event Details</a>
				<a href="#scroll-tab-2" class="mdl-layout__tab">Tab 2</a>
			</div>
		</header>
		<!-- Loading wait animation - MDL Spinner Component with Single Color -->
		<div id="neighbourhood-map-spinner" class="neighbourhood-map-spinner" data-bind="css: displayLoadingWait">
			<p> Attempting to load application and communicate with Google Maps...</p>
			<div class="spinner-wrapper">
				<div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active"></div>
			</div>
		</div>
		<!-- Side list of Events with search option -->
		<div class="mdl-layout__drawer">
			<span class="mdl-layout-title">Events</span>
			<div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable
                  mdl-textfield--floating-label mdl-textfield--align-right">
				<label class="mdl-button mdl-js-button mdl-button--icon" for="filter">
					<i class="material-icons">search</i>
				</label>
				<div class="mdl-textfield__expandable-holder">
					<input class="mdl-textfield__input" type="text" name="filter" id="filter" data-bind="value: filter, valueUpdate: 'afterkeydown'">
				</div>
			</div>
			<nav class="mdl-navigation" data-bind="foreach: filteredEvents">
				<p class="mdl-navigation__link mdl-button mdl-js-button mdl-js-ripple-effect" data-bind="click: $parent.eventListClick"><span class="nav-date" data-bind="text: dateShort"></span><span class="nav-name " data-bind="text: name"></span></p>
			</nav>
		</div>
		<main class="mdl-layout__content" data-bind="if: selectedEvent">
			<section class="mdl-layout__tab-panel is-active" id="scroll-tab-1">
				<div class="page-content">

					<div class="map-info" data-bind="template: { name: 'event-information-template', data: selectedEvent }"></div>
				</div>
			</section>
			<section class="mdl-layout__tab-panel" id="scroll-tab-2">
				<div class="page-content">Page 2 Holder</div>
			</section>
		</main>
		<!-- Main Map -->
		<div id="map-main" class="map-main">
		</div>
	</div>
	<script type="text/html" id="event-information-template">
		<div class="img-holder">
			<img data-bind="attr: { src: imageEventSeries, alt: series }">
		</div>
		<h3 data-bind="text: dateString"></h3>
		<h4 data-bind="text: name"></h4>
		<ul>
			<li>
				<h5>Event Series:</h5>
				<span class="detail" data-bind="text: series"></span>
			</li>
			<li>
				<h5>Start Anytime Between:</h5>
				<span class="detail" data-bind="text: startWindowString"></span>
			</li>
			<li>
				<h5>Course Closure:</h5>
				<span class="detail" data-bind="text: courseCloseString"></span>
			</li>
			<li>
				<h5>Notes:</h5>
				<span class="notes" data-bind="text: notes"></span>
			</li>
			<li class="notice">
				Note: These details are tentative and subject to change.
			</li>
			<li>
				<h5>Website:</h5>
				<span class="detail">
					<a data-bind="text: websiteString, attr: { href: url }" target="_blank"></a>
				</span>
			</li>
			<li class="g-calendar-button"></li>
		</ul>
	</script>
	<script>
	function onAPILoadError(event) {
		var statusText = "Sorry, an error occurred while trying to load a required resource.\nPlease check internet connection and try again.";
		if (typeof(event) !== 'undefined') {
			statusText += "\nSource:\n" + event.target.src;
		}
		console.log(statusText);
		alert(statusText);
	}
	</script>
	<!-- jQuery -->
	<script onerror="onAPILoadError(event)" src="https://code.jquery.com/jquery-3.0.0.min.js"></script>
	<!-- jQuery UI  datepicker -->
	<script src="js/jquery-ui.min.js"></script>
	<!-- Knockout.js -->
	<script src="js/knockout.js"></script>
	<!-- Google Calendar API -->
	<script onerror="onAPILoadError(event)" src="https://apis.google.com/js/client.js?onload=gCalendarCheckAuth"></script>
	<!-- Material Design Lite -->
	<!-- <script onerror="onAPILoadError(event)" defer src="https://code.getmdl.io/1.1.3/material.min.js"></script>-->
	<script src="js/material.js"></script>
	<!-- Google Maps API - infoBubble extension to extend infoWindow -->
	<script src="js/infobubble.js"></script>
	<!-- Javascript date library - php-date-formatter -->
	<script src="js/php-date-formatter.js"></script>
	<script src="js/scripts.js"></script>
	<!-- Google Maps API -->
	<script onerror="onAPIMapLoadError(event)" defer src="https://maps.googleapis.com/maps/api/js?callback=initMap&key=AIzaSyA3IYdjwekchcEnCTNo9oLUCxNHXZFaPcg" async></script>
	<script>
	(function(i, s, o, g, r, a, m) {
		i['GoogleAnalyticsObject'] = r;
		i[r] = i[r] || function() {
			(i[r].q = i[r].q || []).push(arguments)
		}, i[r].l = 1 * new Date();
		a = s.createElement(o),
			m = s.getElementsByTagName(o)[0];
		a.async = 1;
		a.src = g;
		m.parentNode.insertBefore(a, m)
	})(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

	ga('create', 'UA-67899143-1', 'auto');
	ga('send', 'pageview');
	</script>
</body>

</html>
